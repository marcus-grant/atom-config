(function() {
  var SpecHelper, SyncSettings, fs, os, path, run;

  SyncSettings = require('../lib/sync-settings');

  SpecHelper = require('./spec-helpers');

  run = SpecHelper.callAsync;

  fs = require('fs');

  path = require('path');

  os = require('os');

  describe("SyncSettings", function() {
    describe("low-level", function() {
      return describe("::fileContent", function() {
        var tmpPath;
        tmpPath = path.join(os.tmpdir(), 'atom-sync-settings.tmp');
        it("returns null for not existing file", function() {
          return expect(SyncSettings.fileContent(tmpPath)).toBeNull();
        });
        it("returns null for empty file", function() {
          fs.writeFileSync(tmpPath, "");
          try {
            return expect(SyncSettings.fileContent(tmpPath)).toBeNull();
          } finally {
            fs.unlinkSync(tmpPath);
          }
        });
        return it("returns content of existing file", function() {
          var text;
          text = "alabala portocala";
          fs.writeFileSync(tmpPath, text);
          try {
            return expect(SyncSettings.fileContent(tmpPath)).toEqual(text);
          } finally {
            fs.unlinkSync(tmpPath);
          }
        });
      });
    });
    return describe("high-level", function() {
      var GIST_ID_CONFIG, TOKEN_CONFIG;
      TOKEN_CONFIG = 'sync-settings.personalAccessToken';
      GIST_ID_CONFIG = 'sync-settings.gistId';
      window.resetTimeouts();
      SyncSettings.activate();
      window.advanceClock();
      beforeEach(function() {
        this.token = process.env.GITHUB_TOKEN || atom.config.get(TOKEN_CONFIG);
        atom.config.set(TOKEN_CONFIG, this.token);
        return run(function(cb) {
          var gistSettings;
          gistSettings = {
            "public": false,
            description: "Test gist by Sync Settings for Atom https://github.com/atom-community/sync-settings",
            files: {
              README: {
                content: '# Generated by Sync Settings for Atom https://github.com/atom-community/sync-settings'
              }
            }
          };
          return SyncSettings.createClient().gists.create(gistSettings, cb);
        }, (function(_this) {
          return function(err, res) {
            expect(err).toBeNull();
            _this.gistId = res.id;
            console.log("Using Gist " + _this.gistId);
            return atom.config.set(GIST_ID_CONFIG, _this.gistId);
          };
        })(this));
      });
      afterEach(function() {
        return run((function(_this) {
          return function(cb) {
            return SyncSettings.createClient().gists["delete"]({
              id: _this.gistId
            }, cb);
          };
        })(this), function(err, res) {
          return expect(err).toBeNull();
        });
      });
      describe("::backup", function() {
        it("back up the settings", function() {
          atom.config.set('sync-settings.syncSettings', true);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['settings.json']).toBeDefined();
            });
          });
        });
        it("don't back up the settings", function() {
          atom.config.set('sync-settings.syncSettings', false);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['settings.json']).not.toBeDefined();
            });
          });
        });
        it("back up the installed packages list", function() {
          atom.config.set('sync-settings.syncPackages', true);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['packages.json']).toBeDefined();
            });
          });
        });
        it("don't back up the installed packages list", function() {
          atom.config.set('sync-settings.syncPackages', false);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['packages.json']).not.toBeDefined();
            });
          });
        });
        it("back up the user keymaps", function() {
          atom.config.set('sync-settings.syncKeymap', true);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['keymap.cson']).toBeDefined();
            });
          });
        });
        it("don't back up the user keymaps", function() {
          atom.config.set('sync-settings.syncKeymap', false);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['keymap.cson']).not.toBeDefined();
            });
          });
        });
        it("back up the user styles", function() {
          atom.config.set('sync-settings.syncStyles', true);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['styles.less']).toBeDefined();
            });
          });
        });
        it("don't back up the user styles", function() {
          atom.config.set('sync-settings.syncStyles', false);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['styles.less']).not.toBeDefined();
            });
          });
        });
        it("back up the user init.coffee file", function() {
          atom.config.set('sync-settings.syncInit', true);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['init.coffee']).toBeDefined();
            });
          });
        });
        it("don't back up the user init.coffee file", function() {
          atom.config.set('sync-settings.syncInit', false);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['init.coffee']).not.toBeDefined();
            });
          });
        });
        it("back up the user snippets", function() {
          atom.config.set('sync-settings.syncSnippets', true);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['snippets.cson']).toBeDefined();
            });
          });
        });
        it("don't back up the user snippets", function() {
          atom.config.set('sync-settings.syncSnippets', false);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(res.files['snippets.cson']).not.toBeDefined();
            });
          });
        });
        it("back up the files defined in config.extraFiles", function() {
          atom.config.set('sync-settings.extraFiles', ['test.tmp', 'test2.tmp']);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              var file, i, len, ref, results;
              ref = atom.config.get('sync-settings.extraFiles');
              results = [];
              for (i = 0, len = ref.length; i < len; i++) {
                file = ref[i];
                results.push(expect(res.files[file]).toBeDefined());
              }
              return results;
            });
          });
        });
        return it("don't back up extra files defined in config.extraFiles", function() {
          atom.config.set('sync-settings.extraFiles', void 0);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run((function(_this) {
              return function(cb) {
                return SyncSettings.createClient().gists.get({
                  id: _this.gistId
                }, cb);
              };
            })(this), function(err, res) {
              return expect(Object.keys(res.files).length).toBe(1);
            });
          });
        });
      });
      describe("::restore", function() {
        it("updates settings", function() {
          atom.config.set('sync-settings.syncSettings', true);
          atom.config.set("some-dummy", true);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            atom.config.set("some-dummy", false);
            return run(function(cb) {
              return SyncSettings.restore(cb);
            }, function() {
              return expect(atom.config.get("some-dummy")).toBeTruthy();
            });
          });
        });
        it("doesn't updates settings", function() {
          atom.config.set('sync-settings.syncSettings', false);
          atom.config.set("some-dummy", true);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run(function(cb) {
              return SyncSettings.restore(cb);
            }, function() {
              return expect(atom.config.get("some-dummy")).toBeTruthy();
            });
          });
        });
        it("overrides keymap.cson", function() {
          var original, ref;
          atom.config.set('sync-settings.syncKeymap', true);
          original = (ref = SyncSettings.fileContent(atom.keymaps.getUserKeymapPath())) != null ? ref : "# keymap file (not found)";
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            fs.writeFileSync(atom.keymaps.getUserKeymapPath(), original + "\n# modified by sync setting spec");
            return run(function(cb) {
              return SyncSettings.restore(cb);
            }, function() {
              expect(SyncSettings.fileContent(atom.keymaps.getUserKeymapPath())).toEqual(original);
              return fs.writeFileSync(atom.keymaps.getUserKeymapPath(), original);
            });
          });
        });
        return it("restores all other files in the gist as well", function() {
          atom.config.set('sync-settings.extraFiles', ['test.tmp', 'test2.tmp']);
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return run(function(cb) {
              return SyncSettings.restore(cb);
            }, function() {
              var file, i, len, ref, results;
              ref = atom.config.get('sync-settings.extraFiles');
              results = [];
              for (i = 0, len = ref.length; i < len; i++) {
                file = ref[i];
                expect(fs.existsSync(atom.config.configDirPath + "/" + file)).toBe(true);
                expect(SyncSettings.fileContent(atom.config.configDirPath + "/" + file)).toBe("# " + file + " (not found) ");
                results.push(fs.unlink(atom.config.configDirPath + "/" + file));
              }
              return results;
            });
          });
        });
      });
      return describe("::check for update", function() {
        beforeEach(function() {
          return atom.config.unset('sync-settings._lastBackupHash');
        });
        it("updates last hash on backup", function() {
          return run(function(cb) {
            return SyncSettings.backup(cb);
          }, function() {
            return expect(atom.config.get("sync-settings._lastBackupHash")).toBeDefined();
          });
        });
        it("updates last hash on restore", function() {
          return run(function(cb) {
            return SyncSettings.restore(cb);
          }, function() {
            return expect(atom.config.get("sync-settings._lastBackupHash")).toBeDefined();
          });
        });
        return describe("::notification", function() {
          beforeEach(function() {
            return atom.notifications.clear();
          });
          it("displays on newer backup", function() {
            return run(function(cb) {
              return SyncSettings.checkForUpdate(cb);
            }, function() {
              expect(atom.notifications.getNotifications().length).toBe(1);
              return expect(atom.notifications.getNotifications()[0].getType()).toBe('warning');
            });
          });
          return it("ignores on up-to-date backup", function() {
            return run(function(cb) {
              return SyncSettings.backup(cb);
            }, function() {
              return run(function(cb) {
                atom.notifications.clear();
                return SyncSettings.checkForUpdate(cb);
              }, function() {
                expect(atom.notifications.getNotifications().length).toBe(1);
                return expect(atom.notifications.getNotifications()[0].getType()).toBe('success');
              });
            });
          });
        });
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvbWFyY3VzLy5hdG9tL3BhY2thZ2VzL3N5bmMtc2V0dGluZ3Mvc3BlYy9zeW5jLXNldHRpbmdzLXNwZWMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQTs7RUFBQSxZQUFBLEdBQWUsT0FBQSxDQUFRLHNCQUFSOztFQUNmLFVBQUEsR0FBYSxPQUFBLENBQVEsZ0JBQVI7O0VBQ2IsR0FBQSxHQUFNLFVBQVUsQ0FBQzs7RUFDakIsRUFBQSxHQUFLLE9BQUEsQ0FBUSxJQUFSOztFQUNMLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUjs7RUFDUCxFQUFBLEdBQUssT0FBQSxDQUFRLElBQVI7O0VBTUwsUUFBQSxDQUFTLGNBQVQsRUFBeUIsU0FBQTtJQUV2QixRQUFBLENBQVMsV0FBVCxFQUFzQixTQUFBO2FBQ3BCLFFBQUEsQ0FBUyxlQUFULEVBQTBCLFNBQUE7QUFDeEIsWUFBQTtRQUFBLE9BQUEsR0FBVSxJQUFJLENBQUMsSUFBTCxDQUFVLEVBQUUsQ0FBQyxNQUFILENBQUEsQ0FBVixFQUF1Qix3QkFBdkI7UUFFVixFQUFBLENBQUcsb0NBQUgsRUFBeUMsU0FBQTtpQkFDdkMsTUFBQSxDQUFPLFlBQVksQ0FBQyxXQUFiLENBQXlCLE9BQXpCLENBQVAsQ0FBeUMsQ0FBQyxRQUExQyxDQUFBO1FBRHVDLENBQXpDO1FBR0EsRUFBQSxDQUFHLDZCQUFILEVBQWtDLFNBQUE7VUFDaEMsRUFBRSxDQUFDLGFBQUgsQ0FBaUIsT0FBakIsRUFBMEIsRUFBMUI7QUFDQTttQkFDRSxNQUFBLENBQU8sWUFBWSxDQUFDLFdBQWIsQ0FBeUIsT0FBekIsQ0FBUCxDQUF5QyxDQUFDLFFBQTFDLENBQUEsRUFERjtXQUFBO1lBR0UsRUFBRSxDQUFDLFVBQUgsQ0FBYyxPQUFkLEVBSEY7O1FBRmdDLENBQWxDO2VBT0EsRUFBQSxDQUFHLGtDQUFILEVBQXVDLFNBQUE7QUFDckMsY0FBQTtVQUFB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QWIsQ0FBNEIsRUFBNUI7Y0FGRSxDQUFKLEVBR0UsU0FBQTtnQkFDQSxNQUFBLENBQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxnQkFBbkIsQ0FBQSxDQUFxQyxDQUFDLE1BQTdDLENBQW9ELENBQUMsSUFBckQsQ0FBMEQsQ0FBMUQ7dUJBQ0EsTUFBQSxDQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQW5CLENBQUEsQ0FBc0MsQ0FBQSxDQUFBLENBQUUsQ0FBQyxPQUF6QyxDQUFBLENBQVAsQ0FBMEQsQ0FBQyxJQUEzRCxDQUFnRSxTQUFoRTtjQUZBLENBSEY7WUFEQSxDQUZGO1VBRGlDLENBQW5DO1FBWHlCLENBQTNCO01BakI2QixDQUEvQjtJQS9OcUIsQ0FBdkI7RUF4QnVCLENBQXpCO0FBWEEiLCJzb3VyY2VzQ29udGVudCI6WyJTeW5jU2V0dGluZ3MgPSByZXF1aXJlICcuLi9saWIvc3luYy1zZXR0aW5ncydcblNwZWNIZWxwZXIgPSByZXF1aXJlICcuL3NwZWMtaGVscGVycydcbnJ1biA9IFNwZWNIZWxwZXIuY2FsbEFzeW5jXG5mcyA9IHJlcXVpcmUgJ2ZzJ1xucGF0aCA9IHJlcXVpcmUgJ3BhdGgnXG5vcyA9IHJlcXVpcmUgJ29zJ1xuIyBVc2UgdGhlIGNvbW1hbmQgYHdpbmRvdzpydW4tcGFja2FnZS1zcGVjc2AgKGNtZC1hbHQtY3RybC1wKSB0byBydW4gc3BlY3MuXG4jXG4jIFRvIHJ1biBhIHNwZWNpZmljIGBpdGAgb3IgYGRlc2NyaWJlYCBibG9jayBhZGQgYW4gYGZgIHRvIHRoZSBmcm9udCAoZS5nLiBgZml0YFxuIyBvciBgZmRlc2NyaWJlYCkuIFJlbW92ZSB0aGUgYGZgIHRvIHVuZm9jdXMgdGhlIGJsb2NrLlxuXG5kZXNjcmliZSBcIlN5bmNTZXR0aW5nc1wiLCAtPlxuXG4gIGRlc2NyaWJlIFwibG93LWxldmVsXCIsIC0+XG4gICAgZGVzY3JpYmUgXCI6OmZpbGVDb250ZW50XCIsIC0+XG4gICAgICB0bXBQYXRoID0gcGF0aC5qb2luKG9zLnRtcGRpcigpLCAnYXRvbS1zeW5jLXNldHRpbmdzLnRtcCcpXG5cbiAgICAgIGl0IFwicmV0dXJucyBudWxsIGZvciBub3QgZXhpc3RpbmcgZmlsZVwiLCAtPlxuICAgICAgICBleHBlY3QoU3luY1NldHRpbmdzLmZpbGVDb250ZW50KHRtcFBhdGgpKS50b0JlTnVsbCgpXG5cbiAgICAgIGl0IFwicmV0dXJucyBudWxsIGZvciBlbXB0eSBmaWxlXCIsIC0+XG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMgdG1wUGF0aCwgXCJcIlxuICAgICAgICB0cnlcbiAgICAgICAgICBleHBlY3QoU3luY1NldHRpbmdzLmZpbGVDb250ZW50KHRtcFBhdGgpKS50b0JlTnVsbCgpXG4gICAgICAgIGZpbmFsbHlcbiAgICAgICAgICBmcy51bmxpbmtTeW5jIHRtcFBhdGhcblxuICAgICAgaXQgXCJyZXR1cm5zIGNvbnRlbnQgb2YgZXhpc3RpbmcgZmlsZVwiLCAtPlxuICAgICAgICB0ZXh0ID0gXCJhbGFiYWxhIHBvcnRvY2FsYVwiXG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMgdG1wUGF0aCwgdGV4dFxuICAgICAgICB0cnlcbiAgICAgICAgICBleHBlY3QoU3luY1NldHRpbmdzLmZpbGVDb250ZW50KHRtcFBhdGgpKS50b0VxdWFsIHRleHRcbiAgICAgICAgZmluYWxseVxuICAgICAgICAgIGZzLnVubGlua1N5bmMgdG1wUGF0aFxuXG4gIGRlc2NyaWJlIFwiaGlnaC1sZXZlbFwiLCAtPlxuICAgIFRPS0VOX0NPTkZJRyA9ICdzeW5jLXNldHRpbmdzLnBlcnNvbmFsQWNjZXNzVG9rZW4nXG4gICAgR0lTVF9JRF9DT05GSUcgPSAnc3luYy1zZXR0aW5ncy5naXN0SWQnXG5cbiAgICB3aW5kb3cucmVzZXRUaW1lb3V0cygpXG4gICAgU3luY1NldHRpbmdzLmFjdGl2YXRlKClcbiAgICB3aW5kb3cuYWR2YW5jZUNsb2NrKClcblxuICAgIGJlZm9yZUVhY2ggLT5cbiAgICAgIEB0b2tlbiA9IHByb2Nlc3MuZW52LkdJVEhVQl9UT0tFTiBvciBhdG9tLmNvbmZpZy5nZXQoVE9LRU5fQ09ORklHKVxuICAgICAgYXRvbS5jb25maWcuc2V0KFRPS0VOX0NPTkZJRywgQHRva2VuKVxuXG4gICAgICBydW4gKGNiKSAtPlxuICAgICAgICBnaXN0U2V0dGluZ3MgPVxuICAgICAgICAgIHB1YmxpYzogZmFsc2VcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUZXN0IGdpc3QgYnkgU3luYyBTZXR0aW5ncyBmb3IgQXRvbSBodHRwczovL2dpdGh1Yi5jb20vYXRvbS1jb21tdW5pdHkvc3luYy1zZXR0aW5nc1wiXG4gICAgICAgICAgZmlsZXM6IFJFQURNRTogY29udGVudDogJyMgR2VuZXJhdGVkIGJ5IFN5bmMgU2V0dGluZ3MgZm9yIEF0b20gaHR0cHM6Ly9naXRodWIuY29tL2F0b20tY29tbXVuaXR5L3N5bmMtc2V0dGluZ3MnXG4gICAgICAgIFN5bmNTZXR0aW5ncy5jcmVhdGVDbGllbnQoKS5naXN0cy5jcmVhdGUoZ2lzdFNldHRpbmdzLCBjYilcbiAgICAgICwgKGVyciwgcmVzKSA9PlxuICAgICAgICBleHBlY3QoZXJyKS50b0JlTnVsbCgpXG5cbiAgICAgICAgQGdpc3RJZCA9IHJlcy5pZFxuICAgICAgICBjb25zb2xlLmxvZyBcIlVzaW5nIEdpc3QgI3tAZ2lzdElkfVwiXG4gICAgICAgIGF0b20uY29uZmlnLnNldChHSVNUX0lEX0NPTkZJRywgQGdpc3RJZClcblxuICAgIGFmdGVyRWFjaCAtPlxuICAgICAgcnVuIChjYikgPT5cbiAgICAgICAgU3luY1NldHRpbmdzLmNyZWF0ZUNsaWVudCgpLmdpc3RzLmRlbGV0ZSB7aWQ6IEBnaXN0SWR9LCBjYlxuICAgICAgLCAoZXJyLCByZXMpIC0+XG4gICAgICAgIGV4cGVjdChlcnIpLnRvQmVOdWxsKClcblxuICAgIGRlc2NyaWJlIFwiOjpiYWNrdXBcIiwgLT5cbiAgICAgIGl0IFwiYmFjayB1cCB0aGUgc2V0dGluZ3NcIiwgLT5cbiAgICAgICAgYXRvbS5jb25maWcuc2V0KCdzeW5jLXNldHRpbmdzLnN5bmNTZXR0aW5ncycsIHRydWUpXG4gICAgICAgIHJ1biAoY2IpIC0+XG4gICAgICAgICAgU3luY1NldHRpbmdzLmJhY2t1cCBjYlxuICAgICAgICAsIC0+XG4gICAgICAgICAgcnVuIChjYikgPT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5jcmVhdGVDbGllbnQoKS5naXN0cy5nZXQoe2lkOiBAZ2lzdElkfSwgY2IpXG4gICAgICAgICAgLCAoZXJyLCByZXMpIC0+XG4gICAgICAgICAgICBleHBlY3QocmVzLmZpbGVzWydzZXR0aW5ncy5qc29uJ10pLnRvQmVEZWZpbmVkKClcblxuICAgICAgaXQgXCJkb24ndCBiYWNrIHVwIHRoZSBzZXR0aW5nc1wiLCAtPlxuICAgICAgICBhdG9tLmNvbmZpZy5zZXQoJ3N5bmMtc2V0dGluZ3Muc3luY1NldHRpbmdzJywgZmFsc2UpXG4gICAgICAgIHJ1biAoY2IpIC0+XG4gICAgICAgICAgU3luY1NldHRpbmdzLmJhY2t1cCBjYlxuICAgICAgICAsIC0+XG4gICAgICAgICAgcnVuIChjYikgPT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5jcmVhdGVDbGllbnQoKS5naXN0cy5nZXQoe2lkOiBAZ2lzdElkfSwgY2IpXG4gICAgICAgICAgLCAoZXJyLCByZXMpIC0+XG4gICAgICAgICAgICBleHBlY3QocmVzLmZpbGVzWydzZXR0aW5ncy5qc29uJ10pLm5vdC50b0JlRGVmaW5lZCgpXG5cbiAgICAgIGl0IFwiYmFjayB1cCB0aGUgaW5zdGFsbGVkIHBhY2thZ2VzIGxpc3RcIiwgLT5cbiAgICAgICAgYXRvbS5jb25maWcuc2V0KCdzeW5jLXNldHRpbmdzLnN5bmNQYWNrYWdlcycsIHRydWUpXG4gICAgICAgIHJ1biAoY2IpIC0+XG4gICAgICAgICAgU3luY1NldHRpbmdzLmJhY2t1cCBjYlxuICAgICAgICAsIC0+XG4gICAgICAgICAgcnVuIChjYikgPT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5jcmVhdGVDbGllbnQoKS5naXN0cy5nZXQoe2lkOiBAZ2lzdElkfSwgY2IpXG4gICAgICAgICAgLCAoZXJyLCByZXMpIC0+XG4gICAgICAgICAgICBleHBlY3QocmVzLmZpbGVzWydwYWNrYWdlcy5qc29uJ10pLnRvQmVEZWZpbmVkKClcblxuICAgICAgaXQgXCJkb24ndCBiYWNrIHVwIHRoZSBpbnN0YWxsZWQgcGFja2FnZXMgbGlzdFwiLCAtPlxuICAgICAgICBhdG9tLmNvbmZpZy5zZXQoJ3N5bmMtc2V0dGluZ3Muc3luY1BhY2thZ2VzJywgZmFsc2UpXG4gICAgICAgIHJ1biAoY2IpIC0+XG4gICAgICAgICAgU3luY1NldHRpbmdzLmJhY2t1cCBjYlxuICAgICAgICAsIC0+XG4gICAgICAgICAgcnVuIChjYikgPT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5jcmVhdGVDbGllbnQoKS5naXN0cy5nZXQoe2lkOiBAZ2lzdElkfSwgY2IpXG4gICAgICAgICAgLCAoZXJyLCByZXMpIC0+XG4gICAgICAgICAgICBleHBlY3QocmVzLmZpbGVzWydwYWNrYWdlcy5qc29uJ10pLm5vdC50b0JlRGVmaW5lZCgpXG5cbiAgICAgIGl0IFwiYmFjayB1cCB0aGUgdXNlciBrZXltYXBzXCIsIC0+XG4gICAgICAgIGF0b20uY29uZmlnLnNldCgnc3luYy1zZXR0aW5ncy5zeW5jS2V5bWFwJywgdHJ1ZSlcbiAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICBTeW5jU2V0dGluZ3MuYmFja3VwIGNiXG4gICAgICAgICwgLT5cbiAgICAgICAgICBydW4gKGNiKSA9PlxuICAgICAgICAgICAgU3luY1NldHRpbmdzLmNyZWF0ZUNsaWVudCgpLmdpc3RzLmdldCh7aWQ6IEBnaXN0SWR9LCBjYilcbiAgICAgICAgICAsIChlcnIsIHJlcykgLT5cbiAgICAgICAgICAgIGV4cGVjdChyZXMuZmlsZXNbJ2tleW1hcC5jc29uJ10pLnRvQmVEZWZpbmVkKClcblxuICAgICAgaXQgXCJkb24ndCBiYWNrIHVwIHRoZSB1c2VyIGtleW1hcHNcIiwgLT5cbiAgICAgICAgYXRvbS5jb25maWcuc2V0KCdzeW5jLXNldHRpbmdzLnN5bmNLZXltYXAnLCBmYWxzZSlcbiAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICBTeW5jU2V0dGluZ3MuYmFja3VwIGNiXG4gICAgICAgICwgLT5cbiAgICAgICAgICBydW4gKGNiKSA9PlxuICAgICAgICAgICAgU3luY1NldHRpbmdzLmNyZWF0ZUNsaWVudCgpLmdpc3RzLmdldCh7aWQ6IEBnaXN0SWR9LCBjYilcbiAgICAgICAgICAsIChlcnIsIHJlcykgLT5cbiAgICAgICAgICAgIGV4cGVjdChyZXMuZmlsZXNbJ2tleW1hcC5jc29uJ10pLm5vdC50b0JlRGVmaW5lZCgpXG5cbiAgICAgIGl0IFwiYmFjayB1cCB0aGUgdXNlciBzdHlsZXNcIiwgLT5cbiAgICAgICAgYXRvbS5jb25maWcuc2V0KCdzeW5jLXNldHRpbmdzLnN5bmNTdHlsZXMnLCB0cnVlKVxuICAgICAgICBydW4gKGNiKSAtPlxuICAgICAgICAgIFN5bmNTZXR0aW5ncy5iYWNrdXAgY2JcbiAgICAgICAgLCAtPlxuICAgICAgICAgIHJ1biAoY2IpID0+XG4gICAgICAgICAgICBTeW5jU2V0dGluZ3MuY3JlYXRlQ2xpZW50KCkuZ2lzdHMuZ2V0KHtpZDogQGdpc3RJZH0sIGNiKVxuICAgICAgICAgICwgKGVyciwgcmVzKSAtPlxuICAgICAgICAgICAgZXhwZWN0KHJlcy5maWxlc1snc3R5bGVzLmxlc3MnXSkudG9CZURlZmluZWQoKVxuXG4gICAgICBpdCBcImRvbid0IGJhY2sgdXAgdGhlIHVzZXIgc3R5bGVzXCIsIC0+XG4gICAgICAgIGF0b20uY29uZmlnLnNldCgnc3luYy1zZXR0aW5ncy5zeW5jU3R5bGVzJywgZmFsc2UpXG4gICAgICAgIHJ1biAoY2IpIC0+XG4gICAgICAgICAgU3luY1NldHRpbmdzLmJhY2t1cCBjYlxuICAgICAgICAsIC0+XG4gICAgICAgICAgcnVuIChjYikgPT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5jcmVhdGVDbGllbnQoKS5naXN0cy5nZXQoe2lkOiBAZ2lzdElkfSwgY2IpXG4gICAgICAgICAgLCAoZXJyLCByZXMpIC0+XG4gICAgICAgICAgICBleHBlY3QocmVzLmZpbGVzWydzdHlsZXMubGVzcyddKS5ub3QudG9CZURlZmluZWQoKVxuXG4gICAgICBpdCBcImJhY2sgdXAgdGhlIHVzZXIgaW5pdC5jb2ZmZWUgZmlsZVwiLCAtPlxuICAgICAgICBhdG9tLmNvbmZpZy5zZXQoJ3N5bmMtc2V0dGluZ3Muc3luY0luaXQnLCB0cnVlKVxuICAgICAgICBydW4gKGNiKSAtPlxuICAgICAgICAgIFN5bmNTZXR0aW5ncy5iYWNrdXAgY2JcbiAgICAgICAgLCAtPlxuICAgICAgICAgIHJ1biAoY2IpID0+XG4gICAgICAgICAgICBTeW5jU2V0dGluZ3MuY3JlYXRlQ2xpZW50KCkuZ2lzdHMuZ2V0KHtpZDogQGdpc3RJZH0sIGNiKVxuICAgICAgICAgICwgKGVyciwgcmVzKSAtPlxuICAgICAgICAgICAgZXhwZWN0KHJlcy5maWxlc1snaW5pdC5jb2ZmZWUnXSkudG9CZURlZmluZWQoKVxuXG4gICAgICBpdCBcImRvbid0IGJhY2sgdXAgdGhlIHVzZXIgaW5pdC5jb2ZmZWUgZmlsZVwiLCAtPlxuICAgICAgICBhdG9tLmNvbmZpZy5zZXQoJ3N5bmMtc2V0dGluZ3Muc3luY0luaXQnLCBmYWxzZSlcbiAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICBTeW5jU2V0dGluZ3MuYmFja3VwIGNiXG4gICAgICAgICwgLT5cbiAgICAgICAgICBydW4gKGNiKSA9PlxuICAgICAgICAgICAgU3luY1NldHRpbmdzLmNyZWF0ZUNsaWVudCgpLmdpc3RzLmdldCh7aWQ6IEBnaXN0SWR9LCBjYilcbiAgICAgICAgICAsIChlcnIsIHJlcykgLT5cbiAgICAgICAgICAgIGV4cGVjdChyZXMuZmlsZXNbJ2luaXQuY29mZmVlJ10pLm5vdC50b0JlRGVmaW5lZCgpXG5cbiAgICAgIGl0IFwiYmFjayB1cCB0aGUgdXNlciBzbmlwcGV0c1wiLCAtPlxuICAgICAgICBhdG9tLmNvbmZpZy5zZXQoJ3N5bmMtc2V0dGluZ3Muc3luY1NuaXBwZXRzJywgdHJ1ZSlcbiAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICBTeW5jU2V0dGluZ3MuYmFja3VwIGNiXG4gICAgICAgICwgLT5cbiAgICAgICAgICBydW4gKGNiKSA9PlxuICAgICAgICAgICAgU3luY1NldHRpbmdzLmNyZWF0ZUNsaWVudCgpLmdpc3RzLmdldCh7aWQ6IEBnaXN0SWR9LCBjYilcbiAgICAgICAgICAsIChlcnIsIHJlcykgLT5cbiAgICAgICAgICAgIGV4cGVjdChyZXMuZmlsZXNbJ3NuaXBwZXRzLmNzb24nXSkudG9CZURlZmluZWQoKVxuXG4gICAgICBpdCBcImRvbid0IGJhY2sgdXAgdGhlIHVzZXIgc25pcHBldHNcIiwgLT5cbiAgICAgICAgYXRvbS5jb25maWcuc2V0KCdzeW5jLXNldHRpbmdzLnN5bmNTbmlwcGV0cycsIGZhbHNlKVxuICAgICAgICBydW4gKGNiKSAtPlxuICAgICAgICAgIFN5bmNTZXR0aW5ncy5iYWNrdXAgY2JcbiAgICAgICAgLCAtPlxuICAgICAgICAgIHJ1biAoY2IpID0+XG4gICAgICAgICAgICBTeW5jU2V0dGluZ3MuY3JlYXRlQ2xpZW50KCkuZ2lzdHMuZ2V0KHtpZDogQGdpc3RJZH0sIGNiKVxuICAgICAgICAgICwgKGVyciwgcmVzKSAtPlxuICAgICAgICAgICAgZXhwZWN0KHJlcy5maWxlc1snc25pcHBldHMuY3NvbiddKS5ub3QudG9CZURlZmluZWQoKVxuXG4gICAgICBpdCBcImJhY2sgdXAgdGhlIGZpbGVzIGRlZmluZWQgaW4gY29uZmlnLmV4dHJhRmlsZXNcIiwgLT5cbiAgICAgICAgYXRvbS5jb25maWcuc2V0ICdzeW5jLXNldHRpbmdzLmV4dHJhRmlsZXMnLCBbJ3Rlc3QudG1wJywgJ3Rlc3QyLnRtcCddXG4gICAgICAgIHJ1biAoY2IpIC0+XG4gICAgICAgICAgU3luY1NldHRpbmdzLmJhY2t1cCBjYlxuICAgICAgICAsIC0+XG4gICAgICAgICAgcnVuIChjYikgPT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5jcmVhdGVDbGllbnQoKS5naXN0cy5nZXQoe2lkOiBAZ2lzdElkfSwgY2IpXG4gICAgICAgICAgLCAoZXJyLCByZXMpIC0+XG4gICAgICAgICAgICBmb3IgZmlsZSBpbiBhdG9tLmNvbmZpZy5nZXQgJ3N5bmMtc2V0dGluZ3MuZXh0cmFGaWxlcydcbiAgICAgICAgICAgICAgZXhwZWN0KHJlcy5maWxlc1tmaWxlXSkudG9CZURlZmluZWQoKVxuXG4gICAgICBpdCBcImRvbid0IGJhY2sgdXAgZXh0cmEgZmlsZXMgZGVmaW5lZCBpbiBjb25maWcuZXh0cmFGaWxlc1wiLCAtPlxuICAgICAgICBhdG9tLmNvbmZpZy5zZXQgJ3N5bmMtc2V0dGluZ3MuZXh0cmFGaWxlcycsIHVuZGVmaW5lZFxuICAgICAgICBydW4gKGNiKSAtPlxuICAgICAgICAgIFN5bmNTZXR0aW5ncy5iYWNrdXAgY2JcbiAgICAgICAgLCAtPlxuICAgICAgICAgIHJ1biAoY2IpID0+XG4gICAgICAgICAgICBTeW5jU2V0dGluZ3MuY3JlYXRlQ2xpZW50KCkuZ2lzdHMuZ2V0KHtpZDogQGdpc3RJZH0sIGNiKVxuICAgICAgICAgICwgKGVyciwgcmVzKSAtPlxuICAgICAgICAgICAgZXhwZWN0KE9iamVjdC5rZXlzKHJlcy5maWxlcykubGVuZ3RoKS50b0JlKDEpXG5cbiAgICBkZXNjcmliZSBcIjo6cmVzdG9yZVwiLCAtPlxuICAgICAgaXQgXCJ1cGRhdGVzIHNldHRpbmdzXCIsIC0+XG4gICAgICAgIGF0b20uY29uZmlnLnNldCgnc3luYy1zZXR0aW5ncy5zeW5jU2V0dGluZ3MnLCB0cnVlKVxuICAgICAgICBhdG9tLmNvbmZpZy5zZXQgXCJzb21lLWR1bW15XCIsIHRydWVcbiAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICBTeW5jU2V0dGluZ3MuYmFja3VwIGNiXG4gICAgICAgICwgLT5cbiAgICAgICAgICBhdG9tLmNvbmZpZy5zZXQgXCJzb21lLWR1bW15XCIsIGZhbHNlXG4gICAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5yZXN0b3JlIGNiXG4gICAgICAgICAgLCAtPlxuICAgICAgICAgICAgZXhwZWN0KGF0b20uY29uZmlnLmdldCBcInNvbWUtZHVtbXlcIikudG9CZVRydXRoeSgpXG5cbiAgICAgIGl0IFwiZG9lc24ndCB1cGRhdGVzIHNldHRpbmdzXCIsIC0+XG4gICAgICAgIGF0b20uY29uZmlnLnNldCgnc3luYy1zZXR0aW5ncy5zeW5jU2V0dGluZ3MnLCBmYWxzZSlcbiAgICAgICAgYXRvbS5jb25maWcuc2V0IFwic29tZS1kdW1teVwiLCB0cnVlXG4gICAgICAgIHJ1biAoY2IpIC0+XG4gICAgICAgICAgU3luY1NldHRpbmdzLmJhY2t1cCBjYlxuICAgICAgICAsIC0+XG4gICAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5yZXN0b3JlIGNiXG4gICAgICAgICAgLCAtPlxuICAgICAgICAgICAgZXhwZWN0KGF0b20uY29uZmlnLmdldCBcInNvbWUtZHVtbXlcIikudG9CZVRydXRoeSgpXG5cbiAgICAgIGl0IFwib3ZlcnJpZGVzIGtleW1hcC5jc29uXCIsIC0+XG4gICAgICAgIGF0b20uY29uZmlnLnNldCgnc3luYy1zZXR0aW5ncy5zeW5jS2V5bWFwJywgdHJ1ZSlcbiAgICAgICAgb3JpZ2luYWwgPSBTeW5jU2V0dGluZ3MuZmlsZUNvbnRlbnQoYXRvbS5rZXltYXBzLmdldFVzZXJLZXltYXBQYXRoKCkpID8gXCIjIGtleW1hcCBmaWxlIChub3QgZm91bmQpXCJcbiAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICBTeW5jU2V0dGluZ3MuYmFja3VwIGNiXG4gICAgICAgICwgLT5cbiAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jIGF0b20ua2V5bWFwcy5nZXRVc2VyS2V5bWFwUGF0aCgpLCBcIiN7b3JpZ2luYWx9XFxuIyBtb2RpZmllZCBieSBzeW5jIHNldHRpbmcgc3BlY1wiXG4gICAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5yZXN0b3JlIGNiXG4gICAgICAgICAgLCAtPlxuICAgICAgICAgICAgZXhwZWN0KFN5bmNTZXR0aW5ncy5maWxlQ29udGVudChhdG9tLmtleW1hcHMuZ2V0VXNlcktleW1hcFBhdGgoKSkpLnRvRXF1YWwgb3JpZ2luYWxcbiAgICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMgYXRvbS5rZXltYXBzLmdldFVzZXJLZXltYXBQYXRoKCksIG9yaWdpbmFsXG5cbiAgICAgIGl0IFwicmVzdG9yZXMgYWxsIG90aGVyIGZpbGVzIGluIHRoZSBnaXN0IGFzIHdlbGxcIiwgLT5cbiAgICAgICAgYXRvbS5jb25maWcuc2V0ICdzeW5jLXNldHRpbmdzLmV4dHJhRmlsZXMnLCBbJ3Rlc3QudG1wJywgJ3Rlc3QyLnRtcCddXG4gICAgICAgIHJ1biAoY2IpIC0+XG4gICAgICAgICAgU3luY1NldHRpbmdzLmJhY2t1cCBjYlxuICAgICAgICAsIC0+XG4gICAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5yZXN0b3JlIGNiXG4gICAgICAgICAgLCAtPlxuICAgICAgICAgICAgZm9yIGZpbGUgaW4gYXRvbS5jb25maWcuZ2V0ICdzeW5jLXNldHRpbmdzLmV4dHJhRmlsZXMnXG4gICAgICAgICAgICAgIGV4cGVjdChmcy5leGlzdHNTeW5jKFwiI3thdG9tLmNvbmZpZy5jb25maWdEaXJQYXRofS8je2ZpbGV9XCIpKS50b0JlKHRydWUpXG4gICAgICAgICAgICAgIGV4cGVjdChTeW5jU2V0dGluZ3MuZmlsZUNvbnRlbnQoXCIje2F0b20uY29uZmlnLmNvbmZpZ0RpclBhdGh9LyN7ZmlsZX1cIikpLnRvQmUoXCIjICN7ZmlsZX0gKG5vdCBmb3VuZCkgXCIpXG4gICAgICAgICAgICAgIGZzLnVubGluayBcIiN7YXRvbS5jb25maWcuY29uZmlnRGlyUGF0aH0vI3tmaWxlfVwiXG5cbiAgICBkZXNjcmliZSBcIjo6Y2hlY2sgZm9yIHVwZGF0ZVwiLCAtPlxuXG4gICAgICBiZWZvcmVFYWNoIC0+XG4gICAgICAgIGF0b20uY29uZmlnLnVuc2V0ICdzeW5jLXNldHRpbmdzLl9sYXN0QmFja3VwSGFzaCdcblxuICAgICAgaXQgXCJ1cGRhdGVzIGxhc3QgaGFzaCBvbiBiYWNrdXBcIiwgLT5cbiAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICBTeW5jU2V0dGluZ3MuYmFja3VwIGNiXG4gICAgICAgICwgLT5cbiAgICAgICAgICBleHBlY3QoYXRvbS5jb25maWcuZ2V0IFwic3luYy1zZXR0aW5ncy5fbGFzdEJhY2t1cEhhc2hcIikudG9CZURlZmluZWQoKVxuXG4gICAgICBpdCBcInVwZGF0ZXMgbGFzdCBoYXNoIG9uIHJlc3RvcmVcIiwgLT5cbiAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICBTeW5jU2V0dGluZ3MucmVzdG9yZSBjYlxuICAgICAgICAsIC0+XG4gICAgICAgICAgZXhwZWN0KGF0b20uY29uZmlnLmdldCBcInN5bmMtc2V0dGluZ3MuX2xhc3RCYWNrdXBIYXNoXCIpLnRvQmVEZWZpbmVkKClcblxuICAgICAgZGVzY3JpYmUgXCI6Om5vdGlmaWNhdGlvblwiLCAtPlxuICAgICAgICBiZWZvcmVFYWNoIC0+XG4gICAgICAgICAgYXRvbS5ub3RpZmljYXRpb25zLmNsZWFyKClcblxuICAgICAgICBpdCBcImRpc3BsYXlzIG9uIG5ld2VyIGJhY2t1cFwiLCAtPlxuICAgICAgICAgIHJ1biAoY2IpIC0+XG4gICAgICAgICAgICBTeW5jU2V0dGluZ3MuY2hlY2tGb3JVcGRhdGUgY2JcbiAgICAgICAgICAsIC0+XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMoKS5sZW5ndGgpLnRvQmUoMSlcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpWzBdLmdldFR5cGUoKSkudG9CZSgnd2FybmluZycpXG5cbiAgICAgICAgaXQgXCJpZ25vcmVzIG9uIHVwLXRvLWRhdGUgYmFja3VwXCIsIC0+XG4gICAgICAgICAgcnVuIChjYikgLT5cbiAgICAgICAgICAgIFN5bmNTZXR0aW5ncy5iYWNrdXAgY2JcbiAgICAgICAgICAsIC0+XG4gICAgICAgICAgICBydW4gKGNiKSAtPlxuICAgICAgICAgICAgICBhdG9tLm5vdGlmaWNhdGlvbnMuY2xlYXIoKVxuICAgICAgICAgICAgICBTeW5jU2V0dGluZ3MuY2hlY2tGb3JVcGRhdGUgY2JcbiAgICAgICAgICAgICwgLT5cbiAgICAgICAgICAgICAgZXhwZWN0KGF0b20ubm90aWZpY2F0aW9ucy5nZXROb3RpZmljYXRpb25zKCkubGVuZ3RoKS50b0JlKDEpXG4gICAgICAgICAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpWzBdLmdldFR5cGUoKSkudG9CZSgnc3VjY2VzcycpXG4iXX0=
